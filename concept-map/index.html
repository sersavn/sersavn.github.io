<!doctype html><html lang=en><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Sergei Saprunov | Concept Graph</title><style>:root{--background-color-rgb:0, 0, 0;--link-color-rgba:0, 255, 204, 0.8;--node-color-primary-rgb:0, 255, 204;--node-color-primary-fill-rgb:0, 0, 0;--node-color-secondary-rgb:0, 255, 204;--node-color-secondary-fill-rgb:0, 0, 0;--graph-border-rgb:17, 17, 171;--lock-indicator-color-rgba:218, 165, 32, 1;--hover-color-rgba:0, 235, 184, 1;--locked-color-rgba:rgba(77, 0, 0, 1);--text-color-rgb:255, 255, 255;--primary-font:"Noto", sans-serif;--font-size:1.1rem}body{margin:0;padding:0;overflow:hidden;background-color:rgb(var(--background-color-rgb));font-family:var(--primary-font);color:rgb(var(--text-color-rgb))}#instructions{position:absolute;top:1rem;left:1rem;background-color:rgba(0,0,0,.7);padding:.75rem 1rem;border-radius:6px;border:0 solid rgba(255,255,255,.2);font-size:.9rem;font-family:var(--primary-font);line-height:1.4;max-width:18rem;opacity:.3;transition:opacity .7s ease-in-out}#instructions:hover{animation:none;opacity:1;transform:scale(1.1)}#instructions h2{margin:0 0 .5rem;font-size:1rem;font-family:var(--primary-font)}#instructions p{margin:0;padding:.25rem 0}#graph{width:100vw;height:100vh}svg{width:100%;height:100%;display:block}.link{stroke:rgb(var(--link-color-rgba));stroke-width:2px;opacity:.8;transition:stroke-width .2s,opacity .2s}.link:hover{stroke-width:3px;opacity:1}.node.primary circle{fill:rgb(var(--node-color-primary-fill-rgb))}.node.secondary circle{fill:rgb(var(--node-color-secondary-fill-rgb))}.node.primary:hover circle{fill:rgba(var(--hover-color-rgba))}.node.secondary:hover circle{fill:rgba(var(--hover-color-rgba))}text{fill:rgb(var(--text-color-rgb));font-size:var(--font-size);font-family:var(--primary-font);pointer-events:none;text-anchor:middle;dominant-baseline:central}</style></head><body><div id=graph></div><div id=instructions><h2>How to Use</h2><p><strong>Drag & Zoom:</strong> Scroll to zoom in/out, click and drag the background to pan.</p><p><strong>Move Nodes:</strong> Click and drag individual circles to rearrange the layout.</p><p><strong>Explore Concepts:</strong> Click a node to open its detail page in a new tab.</p></div><script src=https://d3js.org/d3.v7.min.js></script><script>function getQueryParameter(e){const t=new URLSearchParams(window.location.search);return t.get(e)}const tagName=getQueryParameter("tag");if(!tagName)throw console.error("Tag name missing from URL parameters."),alert("Error: No 'tag' specified in URL, e.g. ?tag=python"),new Error("Tag name missing");const jsonFile=`/portfolio/data/map-${tagName}.json`;console.log("Loading JSON file:",jsonFile);const containerWidth=1600,containerHeight=1200,borderPadding=100,svg=d3.select("#graph").append("svg").attr("width",containerWidth).attr("height",containerHeight).call(d3.zoom().scaleExtent([.5,3]).on("zoom",zoomed)).append("g");function zoomed(e){svg.attr("transform",e.transform)}svg.append("rect").attr("x",borderPadding).attr("y",borderPadding).attr("width",containerWidth-2*borderPadding).attr("height",containerHeight-2*borderPadding).attr("fill","none").attr("stroke",`rgba(255, 255, 255, 0.3)`).attr("stroke-width",1.2).attr("stroke-dasharray","1"),d3.json(jsonFile).then(e=>{e.nodes.forEach(e=>{e.x=Math.random()*(containerWidth-2*borderPadding)+borderPadding,e.y=Math.random()*(containerHeight-2*borderPadding)+borderPadding});const n=d3.forceSimulation(e.nodes).force("link",d3.forceLink(e.links).id(e=>e.id).distance(()=>Math.random()*150+50)).force("charge",d3.forceManyBody().strength(-100)).force("collide",d3.forceCollide().radius(50).strength(.05)).force("contain",o);function o(){for(let n=0;n<e.nodes.length;n++){const t=e.nodes[n];t.x=Math.max(borderPadding,Math.min(containerWidth-borderPadding,t.x)),t.y=Math.max(borderPadding,Math.min(containerHeight-borderPadding,t.y))}}const s=svg.append("g").attr("class","links").selectAll("line").data(e.links).join("line").style("opacity",0).attr("class","link"),t=svg.append("g").attr("class","nodes").selectAll("g").data(e.nodes).join("g").style("opacity",0).call(d3.drag().on("start",a).on("drag",r).on("end",c));t.attr("class",e=>e.group===1?"node primary":"node secondary"),t.append("circle").attr("r",e=>e.group===1?22:15).style("stroke",`rgb(var(--link-color-rgba))`).style("stroke-width","2px"),t.append("circle").attr("r",3).attr("class","lock-indicator").style("fill","rgba(var(--lock-indicator-color-rgba))").style("opacity",0),t.append("text").text(e=>e.id).attr("dy","-1.35em");const i="http://localhost:1313/";t.on("click",(e,t)=>{if(t.url){const e=`${i}/${t.url}`;window.open(e,"_blank")}else console.warn(`No URL defined for node: ${t.id}`)}),n.on("tick",()=>{s.attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y),t.attr("transform",e=>`translate(${e.x},${e.y})`)});function a(e,t){e.active||n.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}function r(e,t){t.fx=e.x,t.fy=e.y}function c(e,t){e.active||n.alphaTarget(0),t.group===2&&(t.locked=!t.locked,d3.select(this).select(".lock-indicator").style("opacity",t.locked?1:1))}setTimeout(()=>{s.transition().duration(300).style("opacity",1),t.transition().duration(300).style("opacity",1)},100)}).catch(e=>{console.error("Error loading JSON file:",e),alert(`Error loading JSON file: ${jsonFile}`)})</script></body></html>