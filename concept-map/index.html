<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Sergei Saprunov | Concept Graph</title>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css media=print onload='this.media="all"'><script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js integrity=sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4 crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js integrity=sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa crossorigin=anonymous onload=renderMathInElement(document.body)></script><style>:root{--background-color-rgb:0, 0, 0;--link-color-rgba:0, 255, 204, 0.8;--node-color-primary-rgb:0, 255, 204;--node-color-primary-fill-rgb:0, 0, 0;--node-color-secondary-rgb:0, 255, 204;--node-color-secondary-fill-rgb:0, 0, 0;--graph-border-rgb:17, 17, 171;--post-content-display-rgba:0, 0, 0, 0.95;--lock-indicator-color-rgba:218, 165, 32, 1;--hover-color-rgba:0, 235, 184, 1;--locked-color-rgba:rgba(77, 0, 0, 1);--text-color-rgb:255, 255, 255;--primary-font:"Noto", sans-serif;--font-size:1.1rem}body{margin:0;padding:0;overflow:hidden;background-color:rgb(var(--background-color-rgb));font-family:var(--primary-font);color:rgb(var(--text-color-rgb))}#instructions{position:absolute;top:1rem;left:1rem;background-color:rgba(0,0,0,.7);padding:.75rem 1rem;border-radius:6px;border:0 solid rgba(255,255,255,.2);font-size:.9rem;font-family:var(--primary-font);line-height:1.4;max-width:18rem;opacity:.3;transition:opacity .7s ease-in-out}#instructions:hover{animation:none;opacity:1;transform:scale(1.1)}#instructions h2{margin:0 0 .5rem;font-size:1rem;font-family:var(--primary-font)}#instructions p{margin:0;padding:.25rem 0}#post-content-display{position:absolute;top:0;left:0;right:0;height:98vh;max-width:30vw;overflow-y:auto;background-color:rgba(var(--post-content-display-rgba));color:#fff;padding:10px;border-radius:15px;display:none;opacity:0;border:1px solid rgba(0,255,204,.8);box-shadow:0 0 10px rgba(0,255,204,.5)}#graph{width:100vw;height:100vh}svg{width:100%;height:100%;display:block}#control-panel{position:fixed;bottom:10px;left:50%;transform:translateX(-50%);display:flex;gap:10px}button{background-color:rgba(var(--background-color-rgb),.3);color:rgb(var(--text-color-rgb));border:2px solid rgba(var(--node-color-primary-rgb));padding:10px 15px;border-radius:5px;font-size:var(--font-size);cursor:pointer;transition:background-color .3s,opacity .3s;opacity:.3}button:hover{opacity:1}.link{stroke:rgba(var(--link-color-rgba));stroke-width:2px;opacity:.8;transition:stroke-width .2s,opacity .2s}.link:hover{stroke-width:3px;opacity:1}.node circle{fill:rgb(var(--node-color-primary-fill-rgb));transition:opacity .1s ease-in-out}.node:hover circle{fill:rgba(var(--hover-color-rgba))}text{fill:rgb(var(--text-color-rgb));font-size:var(--font-size);font-family:var(--primary-font);pointer-events:none;text-anchor:middle;dominant-baseline:central;transition:opacity 1.5s ease-in-out}</style></head><body><div id=graph></div><div id=instructions><h2>How to Use</h2><p><strong>Navigation:</strong> Scroll to zoom in/out, click and drag the background to pan.</p><p><strong>Interaction:</strong> Click and drag nodes to rearrange them. Hover over a node to see its details.</p><p><strong>Locking & Unlocking:</strong> Drag a node to lock its position. Click a locked node to unlock it.</p><p><strong>Exploration:</strong> Double-click a node to open its detailed page in a new tab.</p><p><strong>Blur Toggle:</strong> Hover over a node or an edge and press <code>b</code> to blur/unblur it.</p></div><div id=post-content-display></div><script src=https://d3js.org/d3.v7.min.js></script><script>let currentHoveredNode=null,currentHoveredLink=null;function getQueryParameter(e){const t=new URLSearchParams(window.location.search);return t.get(e)}const tagName=getQueryParameter("tag");if(!tagName)throw console.error("Tag name missing from URL parameters."),alert("Error: No 'tag' specified in URL, e.g. ?tag=python"),new Error("Tag name missing");const jsonFile=`/portfolio/data/map-${tagName}.json`;console.log("Loading JSON file:",jsonFile);const containerWidth=1800,containerHeight=1300,borderPadding=100,svg=d3.select("#graph").append("svg").attr("width",containerWidth).attr("height",containerHeight).call(d3.zoom().scaleExtent([.5,3]).on("zoom",zoomed)).append("g");function zoomed(e){svg.attr("transform",e.transform)}svg.append("rect").attr("x",borderPadding).attr("y",borderPadding).attr("width",containerWidth-2*borderPadding).attr("height",containerHeight-2*borderPadding).attr("fill","none").attr("stroke",`rgba(255, 255, 255, 0.3)`).attr("stroke-width",1.2).attr("stroke-dasharray","1"),d3.json(jsonFile).then(e=>{e.nodes.forEach(e=>{e.x=Math.random()*(containerWidth-2*borderPadding)+borderPadding,e.y=Math.random()*(containerHeight-2*borderPadding)+borderPadding});const d=10,r=5,f=15,s=d3.max(e.nodes,e=>e.group);function o(e){const t=10,n=5;return(t+(s-e.group)*n)**1.1}const i=d3.forceSimulation(e.nodes).force("link",d3.forceLink(e.links).id(e=>e.id).distance(t=>{const n=e.nodes.find(e=>e.id===t.source.id),s=e.nodes.find(e=>e.id===t.target.id);return o(n)+o(s)+75})).force("charge",d3.forceManyBody().strength(-300)).force("collide",d3.forceCollide().radius(e=>o(e)+5).strength(.1)).force("x",d3.forceX(containerWidth/2).strength(.05)).force("y",d3.forceY(containerHeight/2).strength(.05)),l=svg.append("g").attr("class","links").selectAll("line").data(e.links).join("line").style("opacity",0).attr("class","link").on("mouseover",(e)=>{currentHoveredLink=d3.select(e.currentTarget)}).on("mouseout",()=>{currentHoveredLink=null}),t=svg.append("g").attr("class","nodes").selectAll("g").data(e.nodes).join("g").style("opacity",0).call(d3.drag().on("start",p).on("drag",g).on("end",v));t.attr("class",e=>`node group-${e.group}`),t.append("circle").attr("r",e=>d+(s-e.group)*r).style("stroke",`rgb(var(--link-color-rgba))`).style("stroke-width","2px"),t.append("circle").attr("r",3).attr("class","lock-indicator").style("fill","rgba(var(--lock-indicator-color-rgba))").style("opacity",0),t.append("text").text(e=>e.id).attr("dy",e=>`-${d+(s-e.group)*r+f}px`);let b=!1;const u="https://sersavn.github.io/";t.on("click",(e,t)=>{t.locked=!t.locked,d3.select(e.currentTarget).select(".lock-indicator").style("opacity",t.locked?1:0),t.locked?(t.fx=t.x,t.fy=t.y):(t.fx=null,t.fy=null)}),t.on("dblclick",(e,t)=>{if(t.url){const e=`${u}/${t.url}`;window.open(e,"_blank")}else console.warn(`No URL defined for node: ${t.id}`)});const n=d3.select("#post-content-display");let a;function h(e){if(!e.url){n.html("Page is not created yet").style("display","block").style("opacity",0).transition().duration(1e3).style("opacity",1);return}const t=`${u}/${e.url}`;fetch(t).then(e=>{if(!e.ok)throw new Error("Network response was not ok");return e.text()}).then(e=>{const s=new DOMParser,o=s.parseFromString(e,"text/html"),t=o.querySelector(".post-content");t?(n.html(t.innerHTML).style("display","block").style("opacity",0).transition().duration(1e3).style("opacity",1),renderMathInElement(n.node(),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}]})):n.html("Page is not created yet").style("display","block").style("opacity",0).transition().duration(1e3).style("opacity",1)}).catch(e=>{console.error("Error fetching the page:",e),n.html("Page is not created yet").style("display","block").style("opacity",0).transition().duration(1e3).style("opacity",1)}),c(!0)}function m(){const e=d3.select("#post-content-display");e.transition().duration(500).style("opacity",0).on("end",()=>{e.style("display","none")}),c(!1)}function c(e){const n=e?.2:1,t=1500;svg.selectAll(".link").transition().duration(t).style("opacity",n),svg.selectAll(".node").transition().duration(t).style("opacity",n),e&&svg.selectAll(".node:hover").transition().duration(t).style("opacity",.66)}t.on("mouseover",(e,t)=>{currentHoveredNode=d3.select(e.currentTarget),a=setTimeout(()=>{h(t)},1e3)}),t.on("mouseout",()=>{clearTimeout(a),m(),currentHoveredNode=null}),i.on("tick",()=>{l.attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y),t.attr("transform",e=>`translate(${e.x},${e.y})`)});function p(e,t){e.active||i.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}function g(e,t){t.fx=e.x,t.fy=e.y}function v(e,t){e.active||i.alphaTarget(0),t.group>=1&&t.group<=100&&(t.locked=!0,d3.select(this).select(".lock-indicator").style("opacity",1),t.fx=t.x,t.fy=t.y)}setTimeout(()=>{l.transition().duration(5e3).style("opacity",1),t.transition().duration(1e3).style("opacity",1)},100)}).catch(e=>{console.error("Error loading JSON file:",e),alert(`Error loading JSON file: ${jsonFile}`)});const baseUrl="https://sersavn.github.io/";document.addEventListener("keydown",function(e){(e.key==="b"||e.key==="B")&&(currentHoveredLink?currentHoveredLink.classed("blurred")?currentHoveredLink.classed("blurred",!1).style("filter",null):currentHoveredLink.classed("blurred",!0).style("filter","blur(7px)"):currentHoveredNode&&(currentHoveredNode.classed("blurred")?currentHoveredNode.classed("blurred",!1).style("filter",null):currentHoveredNode.classed("blurred",!0).style("filter","blur(10px)")))})</script></body></html>