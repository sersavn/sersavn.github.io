<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Sergei Saprunov | Concept Graph</title>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css media=print onload='this.media="all"'><script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js integrity=sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4 crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js integrity=sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa crossorigin=anonymous onload=renderMathInElement(document.body)></script><style>:root{--background-color-rgb:0, 0, 0;--link-color-rgba:0, 255, 204, 0.8;--node-color-primary-rgb:0, 255, 204;--node-color-primary-fill-rgb:0, 0, 0;--node-color-secondary-rgb:0, 255, 204;--node-color-secondary-fill-rgb:0, 0, 0;--graph-border-rgb:17, 17, 171;--post-content-display-rgba:0, 0, 0, 0.95;--lock-indicator-color-rgba:218, 165, 32, 1;--hover-color-rgba:0, 235, 184, 1;--locked-color-rgba:rgba(77, 0, 0, 1);--text-color-rgb:255, 255, 255;--primary-font:"Noto", sans-serif;--font-size:1.1rem}*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}body{overflow:hidden;background-color:rgb(var(--background-color-rgb));font-family:var(--primary-font);color:rgb(var(--text-color-rgb))}#instructions{position:absolute;top:1rem;left:1rem;max-width:18rem;padding:.75rem 1rem;background-color:rgba(var(--node-color-primary-rgb),.15);border-radius:20px;font-size:.9rem;line-height:1.4;opacity:.3;transition:opacity .7s ease-in-out,transform .7s ease}#instructions:hover{opacity:1}#instructions h2{margin:0 0 .5rem;font-size:1rem}#instructions p{padding:.25rem 0}#post-content-display{position:absolute;top:1vh;bottom:1vh;left:1vw;right:0;height:98vh;max-width:30vw;padding:10px;overflow-y:auto;background-color:rgba(var(--post-content-display-rgba));border:1px solid rgba(255,255,255,.3);border-radius:15px;box-shadow:0 0 5px rgba(0,255,204,.5);color:#fff;display:none;opacity:0}#graph{width:100vw;height:100vh}svg{width:100%;height:100%;display:block}#control-panel{position:fixed;bottom:10px;left:50%;transform:translateX(-50%);display:flex;gap:10px}button{background-color:rgba(var(--background-color-rgb),.3);color:rgb(var(--text-color-rgb));border:2px solid rgba(var(--node-color-primary-rgb));padding:10px 15px;border-radius:5px;font-size:var(--font-size);cursor:pointer;transition:background-color .3s,opacity .3s;opacity:.3}button:hover{opacity:1}.link{stroke:rgba(var(--link-color-rgba));stroke-width:2px;opacity:0;transition:stroke-width .2s,opacity .2s}.link:hover{stroke-width:3px;opacity:1}.node circle{fill:rgb(var(--node-color-primary-fill-rgb));transition:opacity .1s ease-in-out}.node:hover circle{fill:rgba(var(--hover-color-rgba))}.lock-indicator{fill:rgba(var(--lock-indicator-color-rgba))}text{fill:rgb(var(--text-color-rgb));font-size:var(--font-size);font-family:var(--primary-font);pointer-events:none;text-anchor:middle;dominant-baseline:central;transition:opacity 1.5s ease-in-out}.toggle-container{position:absolute;top:20px;right:20px;width:240px;padding:15px 20px;background-color:rgba(var(--node-color-primary-rgb),.15);border-radius:20px;cursor:pointer;user-select:none;overflow:hidden;opacity:.3;transition:opacity .3s}.toggle-container:hover{opacity:1}.toggle-slider{position:absolute;width:calc(100%/3);top:0;left:0;height:100%;background-color:rgba(var(--link-color-rgba));border-radius:20px;transition:transform .5s ease;z-index:1}.toggle-container[data-position="0"] .toggle-slider{transform:translateX(0)}.toggle-container[data-position="1"] .toggle-slider{transform:translateX(80px)}.toggle-container[data-position="2"] .toggle-slider{transform:translateX(160px)}.toggle-text{position:relative;z-index:1;width:100%;text-align:center;color:rgb(var(--text-color-rgb))}</style></head><body><div id=graph></div><div id=instructions><h2>How to Use</h2><p><strong>Highlight Instructions:</strong> Press <code>'h'</code> or hover over this section to highlight the instructions.</p><p><strong>Navigation:</strong> Scroll to zoom in/out, click and drag the background to pan.</p><p><strong>Interaction:</strong> Click and drag nodes to rearrange them. Hover over a node to see its details.</p><p><strong>Locking & Unlocking:</strong> Drag a node to lock its position. Click a node (after a brief delay) to toggle lock/unlock.</p><p><strong>Blur Toggle:</strong> Hover over a node or an edge and press <code>'b'</code> to blur/unblur it.</p><p><strong>Mastery Level Toggle:</strong> Use the toggle switch to adjust the level of displayed concepts or press <code>'m'</code>.</p></div><div id=post-content-display></div><div class=toggle-container data-position=0 onclick=togglePosition()><div class=toggle-slider></div><div class=toggle-text>Mastery level</div></div><script src=https://d3js.org/d3.v7.min.js></script><script>let simulation,allNodes,allLinks,nodeSelection,linkSelection,currentHoveredNode=null,currentHoveredLink=null,instructionsLocked=!1;const containerWidth=1800,containerHeight=1300,borderPadding=100,tagName=new URLSearchParams(window.location.search).get("tag");if(!tagName)throw console.error("Tag name missing from URL parameters."),alert("Error: No 'tag' specified in URL, e.g. ?tag=python"),new Error("Tag name missing");const jsonFile=`/portfolio/data/map-${tagName}.json`;console.log("Loading JSON file:",jsonFile);const svgGroup=d3.select("#graph").append("svg").attr("width",containerWidth).attr("height",containerHeight).call(d3.zoom().scaleExtent([.5,3]).filter(e=>e.type!=="dblclick").on("zoom",e=>{svgGroup.attr("transform",e.transform)})).append("g");svgGroup.append("rect").attr("x",borderPadding).attr("y",borderPadding).attr("width",containerWidth-2*borderPadding).attr("height",containerHeight-2*borderPadding).attr("rx",20).attr("ry",20).attr("fill","none").attr("stroke","rgba(255, 255, 255, 0.3)").attr("stroke-width",1.2).attr("stroke-dasharray","1"),d3.json(jsonFile).then(e=>{allNodes=e.nodes,allLinks=e.links,allNodes.forEach(e=>{e.x=Math.random()*(containerWidth-2*borderPadding)+borderPadding,e.y=Math.random()*(containerHeight-2*borderPadding)+borderPadding});const i=10,n=5,g=15,s=d3.max(allNodes,e=>e.group),o=e=>Math.pow(i+(s-e.group)*n,1.1);simulation=d3.forceSimulation(allNodes).force("link",d3.forceLink(allLinks).id(e=>e.id).distance(e=>{const t=allNodes.find(t=>t.id===e.source.id),n=allNodes.find(t=>t.id===e.target.id);return o(t)+o(n)+75})).force("charge",d3.forceManyBody().strength(-300)).force("collide",d3.forceCollide().radius(e=>o(e)+5).strength(.1)).force("x",d3.forceX(containerWidth/2).strength(.05)).force("y",d3.forceY(containerHeight/2).strength(.05)),linkSelection=svgGroup.append("g").attr("class","links").selectAll("line").data(allLinks).join("line").attr("class","link").style("opacity",0).on("mouseover",(e)=>{currentHoveredLink=d3.select(e.currentTarget)}).on("mouseout",()=>{currentHoveredLink=null}),nodeSelection=svgGroup.append("g").attr("class","nodes").selectAll("g").data(allNodes).join("g").attr("class",e=>`node group-${e.group}`).style("opacity",0).call(d3.drag().on("start",h).on("drag",m).on("end",f)),nodeSelection.append("circle").attr("r",e=>i+(s-e.group)*n).style("stroke","rgb(var(--link-color-rgba))").style("stroke-width","2px"),nodeSelection.append("circle").attr("r",3).attr("class","lock-indicator").style("fill","rgba(var(--lock-indicator-color-rgba))").style("opacity",0),nodeSelection.append("text").text(e=>e.id).attr("dy",e=>`-${i+(s-e.group)*n+g}px`),nodeSelection.on("click",(e,t)=>{if(t.recentlyDragged){t.recentlyDragged=!1;return}t.locked=!t.locked,d3.select(e.currentTarget).select(".lock-indicator").style("opacity",t.locked?1:0),t.locked?(t.fx=t.x,t.fy=t.y):(t.fx=null,t.fy=null)});const p="https://sersavn.github.io/",t=d3.select("#post-content-display");let l;const d=e=>{if(!e.url){t.html("Page is not created yet").style("display","block").style("opacity",0).transition().duration(1e3).style("opacity",1);return}const n=`${p}/${e.url}`;fetch(n).then(e=>{if(!e.ok)throw new Error("Network response was not ok");return e.text()}).then(e=>{const s=new DOMParser,o=s.parseFromString(e,"text/html"),n=o.querySelector(".post-content");t.html(n?n.innerHTML:"Page is not created yet").style("display","block").style("opacity",0).transition().duration(1e3).style("opacity",1),renderMathInElement(t.node(),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}]})}).catch(e=>{console.error("Error fetching the page:",e),t.html("Content for this concept is coming soon. <br><br>Adjust the mastery level toggle in the upper-right corner to decrease mastery level.").style("display","block").style("opacity",0).transition().duration(1e3).style("opacity",1);const n=document.querySelector(".toggle-container");n&&(n.style.opacity="1")}),a(!0)},u=()=>{t.transition().duration(500).style("opacity",0).on("end",()=>t.style("display","none")),a(!1);const e=document.querySelector(".toggle-container");e&&(e.style.opacity="")},a=e=>{const t=e?.2:1,n=1500;svgGroup.selectAll(".link").transition().duration(n).style("opacity",t),svgGroup.selectAll(".node").transition().duration(n).style("opacity",t)};nodeSelection.on("mouseover",(e,t)=>{currentHoveredNode=d3.select(e.currentTarget),l=setTimeout(()=>d(t),1e3)}),nodeSelection.on("mouseout",()=>{clearTimeout(l),u(),currentHoveredNode=null}),simulation.on("tick",()=>{linkSelection.attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y),nodeSelection.attr("transform",e=>`translate(${e.x},${e.y})`)});function h(e,t){e.active||simulation.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y,t.startX=e.x,t.startY=e.y,t.dragging=!1}function m(e,t){const n=e.x-t.startX,s=e.y-t.startY;Math.sqrt(n*n+s*s)>5&&(t.dragging=!0),t.fx=e.x,t.fy=e.y}function f(e,t){e.active||simulation.alphaTarget(0),t.dragging&&(t.locked=!0,d3.select(this).select(".lock-indicator").style("opacity",1),t.fx=t.x,t.fy=t.y,t.recentlyDragged=!0,setTimeout(()=>{t.recentlyDragged=!1},300))}setTimeout(()=>{linkSelection.transition().duration(3e3).style("opacity",1),nodeSelection.transition().duration(1e3).style("opacity",1)},100);const c=e=>{let t;e===0?t=["Foundational"]:e===1?t=["Foundational","Intermediate"]:t=["Foundational","Intermediate","Advanced"];const s=allNodes.filter(e=>t.includes(e.mastery)),o=allLinks.filter(e=>t.includes(e.mastery));simulation.nodes(s),simulation.force("link").links(o),simulation.alpha(1).restart();const n=new Set(s.map(e=>e.id));nodeSelection.style("display",e=>n.has(e.id)?"block":"none"),linkSelection.style("display",e=>t.includes(e.mastery)&&n.has(e.source.id)&&n.has(e.target.id)?"block":"none")};window.togglePosition=()=>{const t=document.querySelector(".toggle-container");let e=parseInt(t.getAttribute("data-position"));e=(e+1)%3,t.setAttribute("data-position",e),c(e)};const r=document.querySelector(".toggle-container");r?(r.setAttribute("data-position",0),c(0)):console.warn("No toggle-container found!")}).catch(e=>{console.error("Error loading JSON file:",e);const t=document.createElement("div");t.innerHTML=`
        <div style="
          position: fixed;
          top: 50%; left: 50%; transform: translate(-50%, -50%);
          background: #222;
          color: #fff;
          padding: 20px 30px;
          border-radius: 10px;
          text-align: center;
          font-family: var(--primary-font, 'Noto', sans-serif);
          font-size: 1.1rem;
          box-shadow: 0 0 10px rgba(0,0,0,0.5);
          z-index: 1000;">
            <p style="margin-bottom: 10px;">The concept map for this area is currently being developed.</p>
            <p style="margin-bottom: 10px;">In the meantime, check concept maps ready for exploration:</p>
            <p>
              <a href="/concept-map/?tag=probability-theory" style="color: #00ebb8; text-decoration: none;">Probability Theory</a>
            </p>
        </div>
      `,document.body.appendChild(t)}),document.addEventListener("keydown",e=>{const t=e.key.toLowerCase();if(t==="b"){if(currentHoveredLink){const e=currentHoveredLink.classed("blurred");currentHoveredLink.classed("blurred",!e).style("filter",e?null:"blur(7px)")}else if(currentHoveredNode){const e=currentHoveredNode.classed("blurred");currentHoveredNode.classed("blurred",!e).style("filter",e?null:"blur(10px)")}}else if(t==="h"){instructionsLocked=!instructionsLocked;const e=document.getElementById("instructions");instructionsLocked?e.style.opacity="1":e.style.opacity=""}else if(t==="m"){const e=document.querySelector(".toggle-container");e&&(e.click(),e.style.opacity="1",setTimeout(()=>{e.style.opacity=""},300))}})</script></body></html>